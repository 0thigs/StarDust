{"version":3,"file":"LogReporter.js","names":["LogReporter","constructor","logger","reportEvent","update","event","error","Error","serializeError","info","tag","JSON","stringify"],"sources":["../src/LogReporter.ts"],"sourcesContent":["import Log from '@expo/bunyan';\nimport { serializeError } from 'serialize-error';\n\nexport default class LogReporter {\n  constructor(public logger: Log, public reportEvent: (event: any) => void = () => {}) {\n    this.logger = logger;\n    this.reportEvent = reportEvent;\n  }\n\n  update(event: any) {\n    if (event.error instanceof Error) {\n      event.error = serializeError(event.error);\n    }\n    // TODO(ville): replace xdl.PackagerLogsStream with a reporter to avoid serializing to JSON.\n    this.logger.info({ tag: 'metro' }, JSON.stringify(event));\n    this.reportEvent(event);\n  }\n}\n"],"mappings":";;;;;;;AACA;EAAA;;EAAA;IAAA;EAAA;;EAAA;AAAA;;AAEe,MAAMA,WAAN,CAAkB;EAC/BC,WAAW,CAAQC,MAAR,EAA4BC,WAAiC,GAAG,MAAM,CAAE,CAAxE,EAA0E;IAAA,KAAlED,MAAkE,GAAlEA,MAAkE;IAAA,KAA9CC,WAA8C,GAA9CA,WAA8C;IACnF,KAAKD,MAAL,GAAcA,MAAd;IACA,KAAKC,WAAL,GAAmBA,WAAnB;EACD;;EAEDC,MAAM,CAACC,KAAD,EAAa;IACjB,IAAIA,KAAK,CAACC,KAAN,YAAuBC,KAA3B,EAAkC;MAChCF,KAAK,CAACC,KAAN,GAAc,IAAAE,gCAAA,EAAeH,KAAK,CAACC,KAArB,CAAd;IACD,CAHgB,CAIjB;;;IACA,KAAKJ,MAAL,CAAYO,IAAZ,CAAiB;MAAEC,GAAG,EAAE;IAAP,CAAjB,EAAmCC,IAAI,CAACC,SAAL,CAAeP,KAAf,CAAnC;IACA,KAAKF,WAAL,CAAiBE,KAAjB;EACD;;AAb8B"}