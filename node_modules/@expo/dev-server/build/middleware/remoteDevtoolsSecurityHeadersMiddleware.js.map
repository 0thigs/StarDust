{"version":3,"file":"remoteDevtoolsSecurityHeadersMiddleware.js","names":["remoteDevtoolsSecurityHeadersMiddleware","req","res","next","headers","origin","match","Error","setHeader"],"sources":["../../src/middleware/remoteDevtoolsSecurityHeadersMiddleware.ts"],"sourcesContent":["import type { IncomingMessage, ServerResponse } from 'http';\n\n// Like securityHeadersMiddleware but further allow cross-origin requests\n// from https://chrome-devtools-frontend.appspot.com/\nexport function remoteDevtoolsSecurityHeadersMiddleware(\n  req: IncomingMessage,\n  res: ServerResponse,\n  next: (err?: Error) => void\n) {\n  // Block any cross origin request.\n  if (\n    typeof req.headers.origin === 'string' &&\n    !req.headers.origin.match(/^https?:\\/\\/localhost:/) &&\n    !req.headers.origin.match(/^https:\\/\\/chrome-devtools-frontend\\.appspot\\.com/)\n  ) {\n    next(\n      new Error(\n        `Unauthorized request from ${req.headers.origin}. ` +\n          'This may happen because of a conflicting browser extension to intercept HTTP requests. ' +\n          'Please try again without browser extensions or using incognito mode.'\n      )\n    );\n    return;\n  }\n\n  // Block MIME-type sniffing.\n  res.setHeader('X-Content-Type-Options', 'nosniff');\n\n  next();\n}\n"],"mappings":";;;;;;;AAEA;AACA;AACO,SAASA,uCAAT,CACLC,GADK,EAELC,GAFK,EAGLC,IAHK,EAIL;EACA;EACA,IACE,OAAOF,GAAG,CAACG,OAAJ,CAAYC,MAAnB,KAA8B,QAA9B,IACA,CAACJ,GAAG,CAACG,OAAJ,CAAYC,MAAZ,CAAmBC,KAAnB,CAAyB,wBAAzB,CADD,IAEA,CAACL,GAAG,CAACG,OAAJ,CAAYC,MAAZ,CAAmBC,KAAnB,CAAyB,mDAAzB,CAHH,EAIE;IACAH,IAAI,CACF,IAAII,KAAJ,CACG,6BAA4BN,GAAG,CAACG,OAAJ,CAAYC,MAAO,IAAhD,GACE,yFADF,GAEE,sEAHJ,CADE,CAAJ;IAOA;EACD,CAfD,CAiBA;;;EACAH,GAAG,CAACM,SAAJ,CAAc,wBAAd,EAAwC,SAAxC;EAEAL,IAAI;AACL"}