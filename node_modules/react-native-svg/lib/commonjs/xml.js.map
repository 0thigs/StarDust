{"version":3,"names":["tags","svg","Svg","circle","Circle","ellipse","Ellipse","g","G","text","Text","tspan","TSpan","textPath","TextPath","path","Path","polygon","Polygon","polyline","Polyline","line","Line","rect","Rect","use","Use","image","Image","symbol","Symbol","defs","Defs","linearGradient","LinearGradient","radialGradient","RadialGradient","stop","Stop","clipPath","ClipPath","pattern","Pattern","mask","Mask","marker","Marker","missingTag","SvgAst","ast","override","props","children","err","console","error","bind","SvgXml","onError","xml","useMemo","parse","fetchText","uri","fetch","response","ok","Error","status","SvgUri","onLoad","useState","setXml","useEffect","then","data","catch","SvgFromXml","prevProps","setState","e","state","Component","SvgFromUri","upperCase","_match","letter","toUpperCase","camelCase","phrase","replace","getStyle","string","style","declarations","split","filter","v","trim","length","i","declaration","property","value","astToReact","index","Tag","map","repeat","str","result","toSpaces","tabs","locate","source","lines","nLines","column","before","slice","beforeExec","exec","beforeLine","after","afterExec","afterLine","pad","snippet","validNameCharacters","whitespace","quotemarks","middleware","currentElement","metadata","root","stack","message","test","neutral","char","push","openingTag","start","comment","end","cdata","closingTag","tag","getName","element","parent","getAttributes","styles","selfClosing","indexOf","pop","name","allowSpaces","getAttributeValue","isNaN","getQuotedAttributeValue","getUnquotedAttributeValue","quotemark","escaped","jsx"],"sources":["xml.tsx"],"sourcesContent":["import React, {\n  Component,\n  ComponentType,\n  useEffect,\n  useMemo,\n  useState,\n} from 'react';\nimport Rect from './elements/Rect';\nimport Circle from './elements/Circle';\nimport Ellipse from './elements/Ellipse';\nimport Polygon from './elements/Polygon';\nimport Polyline from './elements/Polyline';\nimport Line from './elements/Line';\nimport Svg, { SvgProps } from './elements/Svg';\nimport Path from './elements/Path';\nimport G from './elements/G';\nimport Text from './elements/Text';\nimport TSpan from './elements/TSpan';\nimport TextPath from './elements/TextPath';\nimport Use from './elements/Use';\nimport Image from './elements/Image';\nimport Symbol from './elements/Symbol';\nimport Defs from './elements/Defs';\nimport LinearGradient from './elements/LinearGradient';\nimport RadialGradient from './elements/RadialGradient';\nimport Stop from './elements/Stop';\nimport ClipPath from './elements/ClipPath';\nimport Pattern from './elements/Pattern';\nimport Mask from './elements/Mask';\nimport Marker from './elements/Marker';\n\nexport const tags: { [tag: string]: ComponentType } = {\n  svg: Svg,\n  circle: Circle,\n  ellipse: Ellipse,\n  g: G,\n  text: Text,\n  tspan: TSpan,\n  textPath: TextPath,\n  path: Path,\n  polygon: Polygon,\n  polyline: Polyline,\n  line: Line,\n  rect: Rect,\n  use: Use,\n  image: Image,\n  symbol: Symbol,\n  defs: Defs,\n  linearGradient: LinearGradient,\n  radialGradient: RadialGradient,\n  stop: Stop,\n  clipPath: ClipPath,\n  pattern: Pattern,\n  mask: Mask,\n  marker: Marker,\n};\n\nfunction missingTag() {\n  return null;\n}\n\nexport interface AST {\n  tag: string;\n  style?: Styles;\n  styles?: string;\n  priority?: Map<string, boolean | undefined>;\n  parent: AST | null;\n  children: (AST | string)[] | (JSX.Element | string)[];\n  props: {\n    [prop: string]: Styles | string | undefined;\n  };\n  Tag: ComponentType<React.PropsWithChildren<{}>>;\n}\n\nexport interface XmlAST extends AST {\n  children: (XmlAST | string)[];\n  parent: XmlAST | null;\n}\n\nexport interface JsxAST extends AST {\n  children: (JSX.Element | string)[];\n}\n\nexport type AdditionalProps = {\n  onError?: (error: Error) => void;\n  override?: Object;\n  onLoad?: () => void;\n};\n\nexport type UriProps = SvgProps & { uri: string | null } & AdditionalProps;\nexport type UriState = { xml: string | null };\n\nexport type XmlProps = SvgProps & { xml: string | null } & AdditionalProps;\nexport type XmlState = { ast: JsxAST | null };\n\nexport type AstProps = SvgProps & { ast: JsxAST | null } & AdditionalProps;\n\nexport function SvgAst({ ast, override }: AstProps) {\n  if (!ast) {\n    return null;\n  }\n  const { props, children } = ast;\n  return (\n    <Svg {...props} {...override}>\n      {children}\n    </Svg>\n  );\n}\n\nexport const err = console.error.bind(console);\n\nexport function SvgXml(props: XmlProps) {\n  const { onError = err, xml, override } = props;\n  const ast = useMemo<JsxAST | null>(\n    () => (xml !== null ? parse(xml) : null),\n    [xml],\n  );\n\n  try {\n    return <SvgAst ast={ast} override={override || props} />;\n  } catch (error) {\n    onError(error);\n    return null;\n  }\n}\n\nexport async function fetchText(uri: string) {\n  const response = await fetch(uri);\n  if (response.ok) {\n    return await response.text();\n  }\n  throw new Error(`Fetching ${uri} failed with status ${response.status}`);\n}\n\nexport function SvgUri(props: UriProps) {\n  const { onError = err, uri, onLoad } = props;\n  const [xml, setXml] = useState<string | null>(null);\n  useEffect(() => {\n    uri\n      ? fetchText(uri)\n          .then((data) => {\n            setXml(data);\n            onLoad?.();\n          })\n          .catch(onError)\n      : setXml(null);\n  }, [onError, uri, onLoad]);\n  return <SvgXml xml={xml} override={props} />;\n}\n\n// Extending Component is required for Animated support.\n\nexport class SvgFromXml extends Component<XmlProps, XmlState> {\n  state = { ast: null };\n  componentDidMount() {\n    this.parse(this.props.xml);\n  }\n  componentDidUpdate(prevProps: { xml: string | null }) {\n    const { xml } = this.props;\n    if (xml !== prevProps.xml) {\n      this.parse(xml);\n    }\n  }\n  parse(xml: string | null) {\n    try {\n      this.setState({ ast: xml ? parse(xml) : null });\n    } catch (e) {\n      console.error(e);\n    }\n  }\n  render() {\n    const {\n      props,\n      state: { ast },\n    } = this;\n    return <SvgAst ast={ast} override={props.override || props} />;\n  }\n}\n\nexport class SvgFromUri extends Component<UriProps, UriState> {\n  state = { xml: null };\n  componentDidMount() {\n    this.fetch(this.props.uri);\n  }\n  componentDidUpdate(prevProps: { uri: string | null }) {\n    const { uri } = this.props;\n    if (uri !== prevProps.uri) {\n      this.fetch(uri);\n    }\n  }\n  async fetch(uri: string | null) {\n    try {\n      this.setState({ xml: uri ? await fetchText(uri) : null });\n    } catch (e) {\n      console.error(e);\n    }\n  }\n  render() {\n    const {\n      props,\n      state: { xml },\n    } = this;\n    return <SvgFromXml xml={xml} override={props} />;\n  }\n}\n\nconst upperCase = (_match: string, letter: string) => letter.toUpperCase();\n\nexport const camelCase = (phrase: string) =>\n  phrase.replace(/[:-]([a-z])/g, upperCase);\n\nexport type Styles = { [property: string]: string };\n\nexport function getStyle(string: string): Styles {\n  const style: Styles = {};\n  const declarations = string.split(';').filter((v) => v.trim());\n  const { length } = declarations;\n  for (let i = 0; i < length; i++) {\n    const declaration = declarations[i];\n    if (declaration.length !== 0) {\n      const split = declaration.split(':');\n      const property = split[0];\n      const value = split[1];\n      style[camelCase(property.trim())] = value.trim();\n    }\n  }\n  return style;\n}\n\nexport function astToReact(\n  value: AST | string,\n  index: number,\n): JSX.Element | string {\n  if (typeof value === 'object') {\n    const { Tag, props, children } = value;\n    return (\n      <Tag key={index} {...props}>\n        {(children as (AST | string)[]).map(astToReact)}\n      </Tag>\n    );\n  }\n  return value;\n}\n\n// slimmed down parser based on https://github.com/Rich-Harris/svg-parser\n\nfunction repeat(str: string, i: number) {\n  let result = '';\n  while (i--) {\n    result += str;\n  }\n  return result;\n}\n\nconst toSpaces = (tabs: string) => repeat('  ', tabs.length);\n\nfunction locate(source: string, i: number) {\n  const lines = source.split('\\n');\n  const nLines = lines.length;\n  let column = i;\n  let line = 0;\n  for (; line < nLines; line++) {\n    const { length } = lines[line];\n    if (column >= length) {\n      column -= length;\n    } else {\n      break;\n    }\n  }\n  const before = source.slice(0, i).replace(/^\\t+/, toSpaces);\n  const beforeExec = /(^|\\n).*$/.exec(before);\n  const beforeLine = (beforeExec && beforeExec[0]) || '';\n  const after = source.slice(i);\n  const afterExec = /.*(\\n|$)/.exec(after);\n  const afterLine = afterExec && afterExec[0];\n  const pad = repeat(' ', beforeLine.length);\n  const snippet = `${beforeLine}${afterLine}\\n${pad}^`;\n  return { line, column, snippet };\n}\n\nconst validNameCharacters = /[a-zA-Z0-9:_-]/;\nconst whitespace = /[\\s\\t\\r\\n]/;\nconst quotemarks = /['\"]/;\n\nexport type Middleware = (ast: XmlAST) => XmlAST;\n\nexport function parse(source: string, middleware?: Middleware): JsxAST | null {\n  const length = source.length;\n  let currentElement: XmlAST | null = null;\n  let state = metadata;\n  let children = null;\n  let root: XmlAST | undefined;\n  let stack: XmlAST[] = [];\n\n  function error(message: string) {\n    const { line, column, snippet } = locate(source, i);\n    throw new Error(\n      `${message} (${line}:${column}). If this is valid SVG, it's probably a bug. Please raise an issue\\n\\n${snippet}`,\n    );\n  }\n\n  function metadata() {\n    while (\n      i + 1 < length &&\n      (source[i] !== '<' || !validNameCharacters.test(source[i + 1]))\n    ) {\n      i++;\n    }\n\n    return neutral();\n  }\n\n  function neutral() {\n    let text = '';\n    let char;\n    while (i < length && (char = source[i]) !== '<') {\n      text += char;\n      i += 1;\n    }\n\n    if (/\\S/.test(text)) {\n      children.push(text);\n    }\n\n    if (source[i] === '<') {\n      return openingTag;\n    }\n\n    return neutral;\n  }\n\n  function openingTag() {\n    const char = source[i];\n\n    if (char === '?') {\n      return neutral;\n    } // <?xml...\n\n    if (char === '!') {\n      const start = i + 1;\n      if (source.slice(start, i + 3) === '--') {\n        return comment;\n      }\n      const end = i + 8;\n      if (source.slice(start, end) === '[CDATA[') {\n        return cdata;\n      }\n      if (/doctype/i.test(source.slice(start, end))) {\n        return neutral;\n      }\n    }\n\n    if (char === '/') {\n      return closingTag;\n    }\n\n    const tag = getName();\n    const props: { [prop: string]: Styles | string | undefined } = {};\n    const element: XmlAST = {\n      tag,\n      props,\n      children: [],\n      parent: currentElement,\n      Tag: tags[tag] || missingTag,\n    };\n\n    if (currentElement) {\n      children.push(element);\n    } else {\n      root = element;\n    }\n\n    getAttributes(props);\n\n    const { style } = props;\n    if (typeof style === 'string') {\n      element.styles = style;\n      props.style = getStyle(style);\n    }\n\n    let selfClosing = false;\n\n    if (source[i] === '/') {\n      i += 1;\n      selfClosing = true;\n    }\n\n    if (source[i] !== '>') {\n      error('Expected >');\n    }\n\n    if (!selfClosing) {\n      currentElement = element;\n      ({ children } = element);\n      stack.push(element);\n    }\n\n    return neutral;\n  }\n\n  function comment() {\n    const index = source.indexOf('-->', i);\n    if (!~index) {\n      error('expected -->');\n    }\n\n    i = index + 2;\n    return neutral;\n  }\n\n  function cdata() {\n    const index = source.indexOf(']]>', i);\n    if (!~index) {\n      error('expected ]]>');\n    }\n\n    children.push(source.slice(i + 7, index));\n\n    i = index + 2;\n    return neutral;\n  }\n\n  function closingTag() {\n    const tag = getName();\n\n    if (!tag) {\n      error('Expected tag name');\n    }\n\n    if (currentElement && tag !== currentElement.tag) {\n      error(\n        `Expected closing tag </${tag}> to match opening tag <${currentElement.tag}>`,\n      );\n    }\n\n    if (source[i] !== '>') {\n      error('Expected >');\n    }\n\n    stack.pop();\n    currentElement = stack[stack.length - 1];\n    if (currentElement) {\n      ({ children } = currentElement);\n    }\n\n    return neutral;\n  }\n\n  function getName() {\n    let name = '';\n    let char;\n    while (i < length && validNameCharacters.test((char = source[i]))) {\n      name += char;\n      i += 1;\n    }\n\n    return name;\n  }\n\n  function getAttributes(props: {\n    [x: string]: Styles | string | number | boolean | undefined;\n    style?: string | Styles | undefined;\n  }) {\n    while (i < length) {\n      if (!whitespace.test(source[i])) {\n        return;\n      }\n      allowSpaces();\n\n      const name = getName();\n      if (!name) {\n        return;\n      }\n\n      let value: boolean | number | string = true;\n\n      allowSpaces();\n      if (source[i] === '=') {\n        i += 1;\n        allowSpaces();\n\n        value = getAttributeValue();\n        if (!isNaN(+value) && value.trim() !== '') {\n          value = +value;\n        }\n      }\n\n      props[camelCase(name)] = value;\n    }\n  }\n\n  function getAttributeValue(): string {\n    return quotemarks.test(source[i])\n      ? getQuotedAttributeValue()\n      : getUnquotedAttributeValue();\n  }\n\n  function getUnquotedAttributeValue() {\n    let value = '';\n    do {\n      const char = source[i];\n      if (char === ' ' || char === '>' || char === '/') {\n        return value;\n      }\n\n      value += char;\n      i += 1;\n    } while (i < length);\n\n    return value;\n  }\n\n  function getQuotedAttributeValue() {\n    const quotemark = source[i++];\n\n    let value = '';\n    let escaped = false;\n\n    while (i < length) {\n      const char = source[i++];\n      if (char === quotemark && !escaped) {\n        return value;\n      }\n\n      if (char === '\\\\' && !escaped) {\n        escaped = true;\n      }\n\n      value += escaped ? `\\\\${char}` : char;\n      escaped = false;\n    }\n\n    return value;\n  }\n\n  function allowSpaces() {\n    while (i < length && whitespace.test(source[i])) {\n      i += 1;\n    }\n  }\n\n  let i = 0;\n  while (i < length) {\n    if (!state) {\n      error('Unexpected character');\n    }\n    state = state();\n    i += 1;\n  }\n\n  if (state !== neutral) {\n    error('Unexpected end of input');\n  }\n\n  if (root) {\n    const xml: XmlAST = (middleware ? middleware(root) : root) || root;\n    const ast: (JSX.Element | string)[] = xml.children.map(astToReact);\n    const jsx: JsxAST = xml as JsxAST;\n    jsx.children = ast;\n    return jsx;\n  }\n\n  return null;\n}\n"],"mappings":"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"}