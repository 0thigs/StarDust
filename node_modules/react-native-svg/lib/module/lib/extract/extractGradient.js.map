{"version":3,"names":["percentReg","percentToFloat","percent","__getAnimatedValue","matched","match","console","warn","offsetComparator","object","other","extractGradient","props","parent","id","children","gradientTransform","transform","gradientUnits","stops","childArray","Children","map","child","React","cloneElement","l","length","i","style","offset","stopColor","stopOpacity","offsetNumber","color","processColor","isNaN","alpha","Math","round","extractOpacity","push","sort","gradient","k","j","s","name","units","extractTransform"],"sources":["extractGradient.ts"],"sourcesContent":["import React, { Children, ReactElement } from 'react';\nimport { processColor } from 'react-native';\n\nimport extractOpacity from './extractOpacity';\nimport extractTransform from './extractTransform';\nimport { TransformProps } from './types';\nimport units from '../units';\n\nconst percentReg = /^([+-]?\\d+(?:\\.\\d+)?(?:[eE][+-]?\\d+)?)(%?)$/;\n\nfunction percentToFloat(\n  percent:\n    | number\n    | string\n    | {\n        __getAnimatedValue: () => number;\n      },\n): number {\n  if (typeof percent === 'number') {\n    return percent;\n  }\n  if (\n    typeof percent === 'object' &&\n    typeof percent.__getAnimatedValue === 'function'\n  ) {\n    return percent.__getAnimatedValue();\n  }\n  const matched = typeof percent === 'string' && percent.match(percentReg);\n  if (!matched) {\n    console.warn(`\"${percent}\" is not a valid number or percentage string.`);\n    return 0;\n  }\n\n  return matched[2] ? +matched[1] / 100 : +matched[1];\n}\n\nconst offsetComparator = (object: number[], other: number[]) =>\n  object[0] - other[0];\n\nexport default function extractGradient(\n  props: {\n    id?: string;\n    children?: ReactElement[];\n    transform?: number[] | string | TransformProps;\n    gradientTransform?: number[] | string | TransformProps;\n    gradientUnits?: 'objectBoundingBox' | 'userSpaceOnUse';\n  } & TransformProps,\n  parent: {},\n) {\n  const { id, children, gradientTransform, transform, gradientUnits } = props;\n  if (!id) {\n    return null;\n  }\n\n  const stops = [];\n  const childArray = children\n    ? Children.map(children, (child) =>\n        React.cloneElement(child, {\n          parent,\n        }),\n      )\n    : [];\n  const l = childArray.length;\n  for (let i = 0; i < l; i++) {\n    const {\n      props: {\n        style,\n        offset = style && style.offset,\n        stopColor = (style && style.stopColor) || '#000',\n        stopOpacity = style && style.stopOpacity,\n      },\n    } = childArray[i];\n    const offsetNumber = percentToFloat(offset || 0);\n    const color = stopColor && processColor(stopColor);\n    if (typeof color !== 'number' || isNaN(offsetNumber)) {\n      console.warn(\n        `\"${stopColor}\" is not a valid color or \"${offset}\" is not a valid offset`,\n      );\n      continue;\n    }\n    const alpha = Math.round(extractOpacity(stopOpacity) * 255);\n    stops.push([offsetNumber, (color & 0x00ffffff) | (alpha << 24)]);\n  }\n  stops.sort(offsetComparator);\n\n  const gradient = [];\n  const k = stops.length;\n  for (let j = 0; j < k; j++) {\n    const s = stops[j];\n    gradient.push(s[0], s[1]);\n  }\n\n  return {\n    name: id,\n    gradient,\n    children: childArray,\n    gradientUnits: (gradientUnits && units[gradientUnits]) || 0,\n    gradientTransform: extractTransform(\n      gradientTransform || transform || props,\n    ),\n  };\n}\n"],"mappings":"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"}